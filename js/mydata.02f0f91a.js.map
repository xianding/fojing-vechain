{"version":3,"sources":["webpack:///./src/views/mydata.vue?3017","webpack:///src/views/mydata.vue","webpack:///./src/views/mydata.vue?f955","webpack:///./src/views/mydata.vue?1c7e","webpack:///./src/views/mydata.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mydata_vue_vue_type_style_index_0_id_3377b8a2_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mydata_vue_vue_type_style_index_0_id_3377b8a2_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","name","store","_store__WEBPACK_IMPORTED_MODULE_2__","data","sender","state","computed","signer","this","$store","list","mydatalist","mounted","commit","read","watch","val","methods","recipient","toLowerCase","data1","data2","filter","connex","thor","criteria","apply","then","logs","arr_txid","forEach","value","i","indexOf","meta","txID","push","transaction","get","clauses","slice","str","Buffer","toString","validator__WEBPACK_IMPORTED_MODULE_3___default","a","isJSON","JSON","parse","hasOwnProperty","info","txid","console","log","err","golink","$router","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","text-align","_v","_s","_l","items","index","key","attrs","target","on","click","$event","title","staticRenderFns","views_mydatavue_type_script_lang_js_","mydatavue_type_script_lang_js_","component","Object","componentNormalizer"],"mappings":"mIAAA,IAAAA,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAkeE,EAAG,2GC2BreE,EAAA,MACAC,KAAA,SACAC,MAAAC,EAAA,KACAC,KAHA,WAIA,OACAC,OAAAF,EAAA,KAAAG,MAAAD,SAGAE,SAAA,CACAC,OADA,WAEA,OAAAC,KAAAC,OAAAJ,MAAAE,QAEAG,KAJA,WAKA,OAAAF,KAAAC,OAAAJ,MAAAM,aAGAC,QAhBA,WAiBAV,EAAA,KAAAW,OAAA,aACAL,KAAAM,QAEAC,MAAA,CACAR,OAAA,SAAAS,GACAR,KAAAM,SAGAG,QAAA,CACAH,KADA,WAGA,GAAAN,KAAAD,OAAA,CAGA,IAAAW,EAAA,GAEAA,EADAV,KAAAD,OAAAY,gBAAAX,KAAAJ,OAAAe,cACAX,KAAAC,OAAAJ,MAAAe,MAEAZ,KAAAC,OAAAJ,MAAAgB,MAGAnB,EAAA,KAAAW,OAAA,kBAEA,IAEA,IAAAS,EAAAC,OAAAC,KAAAF,OAAA,YAEAA,EAAAG,SAAA,EACArB,OAAAI,KAAAJ,OACAc,eAGAI,EAAAI,MAAA,OAAAC,KAAA,SAAAC,GAEA,IAAAC,EAAA,GACAD,EAAAE,QAAA,SAAAC,EAAAC,GAGA,QAAAH,EAAAI,QAAAF,EAAAG,KAAAC,MAAA,CAEAN,EAAAO,KAAAL,EAAAG,KAAAC,MAEA,IAAAE,EAAAd,OAAAC,KAAAa,YAAAN,EAAAG,KAAAC,MACAE,EAAAC,MAAAX,KAAA,SAAAX,GACA,GAAAA,EAAAuB,QAAA,CACA,IAAApC,EAAAa,EAAAuB,QAAA,GAAApC,KAAAqC,MAAA,GACAC,EAAA,IAAAC,EAAAvC,EAAA,OAAAwC,SAAA,QACAC,EAAAC,EAAAC,OAAAL,KAEAA,EAAAM,KAAAC,MAAAP,GACAA,EAAAQ,eAAA,UAAAR,EAAAQ,eAAA,SAAAR,EAAAQ,eAAA,kBAAAR,EAAAS,OAEAT,EAAAU,KAAApB,EAAAG,KAAAC,KACAjC,EAAA,KAAAW,OAAA,eAAA4B,aAUAW,QAAAC,IAAA7C,KAAAE,MAEA,MAAA4C,GAEAF,QAAAC,IAAAC,MAOAC,OAlEA,SAkEAJ,GACA3C,KAAAgD,QAAApB,KAAA,SAAAe,8ECvHA,IAAAM,EAAA,WAA0B,IAAAC,EAAAlD,KAAamD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAqB,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAF,EAAA,KAAUG,YAAA,CAAaC,aAAA,WAAuB,CAAAP,EAAAQ,GAAA,OAAAR,EAAAS,GAAAT,EAAAnD,WAAAsD,EAAA,KAA8CG,YAAA,CAAaC,aAAA,WAAuB,CAAAP,EAAAQ,GAAA,kBAAAR,EAAA,OAAAG,EAAA,OAAAH,EAAA,KAAAG,EAAA,MAAAH,EAAAU,GAAAV,EAAA,cAAAW,EAAAC,GAA8G,OAAAT,EAAA,MAAgBU,IAAAD,GAAU,CAAAT,EAAA,KAAUW,MAAA,CAAOC,OAAA,UAAkBC,GAAA,CAAKC,MAAA,SAAAC,GAAyB,OAAAlB,EAAAH,OAAAc,EAAAlB,SAAgC,CAAAO,EAAAQ,GAAAR,EAAAS,GAAAE,EAAAQ,cAAkC,GAAAhB,EAAA,OAAAH,EAAAQ,GAAA,2DAAAL,EAAA,OAAAH,EAAAQ,GAAA,mCAC9iBY,EAAA,eCDgVC,EAAAC,EAAA,6BCQhVC,EAAgBC,OAAAC,EAAA,KAAAD,CACdH,EACAtB,EACAqB,GACF,EACA,KACA,WACA,MAIe/E,EAAA,WAAAkF","file":"js/mydata.02f0f91a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=style&index=0&id=3377b8a2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=style&index=0&id=3377b8a2&scoped=true&lang=css&\"","<template>\n  <div class=\"mydata\">\n    <div class=\"post-body\">\n      <p style=\"text-align: center\">欢迎您：{{signer}}</p>\n      <p style=\"text-align: center\">下面为您的链上已确认数据</p>\n\n      <div v-if=\"signer\">\n        <div v-if=\"list\">\n          <li v-for=\"(items,index) in list\" :key=\"index\" >\n            <a @click=\"golink(items.txid)\" target=\"_blank\">{{ items.title }}</a>\n          </li>\n        </div>\n        <div v-else >\n          该钱包地址未上传任何数据，如已提交成功，请等待主网确认都即可显示；\n        </div>\n      </div>\n      <div v-else>\n        请先授权地址访问权限\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\n  import store from  '@/store'\n  import validator from 'validator'\n  export default {\n    name: \"mydata\",\n    store,\n    data() {\n      return {\n        sender: store.state.sender,\n      }\n    },\n    computed: {\n      signer() {\n        return this.$store.state.signer;\n      },\n      list(){\n        return this.$store.state.mydatalist;\n      }\n    },\n    mounted() {\n      store.commit('getsigner')\n      this.read()\n    },\n    watch: {\n      signer: function (val) {\n        this.read()\n      }\n    },\n    methods: {\n      read() {\n\n        if (this.signer) {\n\n            //判断to地址\n            var recipient = ''\n            if (this.signer.toLowerCase() === this.sender.toLowerCase()) {\n              recipient = this.$store.state.data1\n            } else {\n              recipient = this.$store.state.data2\n            }\n\n            store.commit('upmydatalist' , 0) //清空列表\n\n          try {\n\n            const filter=connex.thor.filter('transfer')\n\n            filter.criteria([{\n              sender: this.sender,\n              recipient:recipient\n            }])\n\n            filter.apply(0,256).then(logs=>{\n\n              var arr_txid = []\n              logs.forEach(function(value,i){\n\n                //判断重复\n                if( arr_txid.indexOf(value.meta.txID) === -1 ){\n\n                  arr_txid.push(value.meta.txID)\n                  //读取数据\n                  const transaction=connex.thor.transaction(value.meta.txID)\n                  transaction.get().then(val =>{\n                    if( val.clauses ){\n                      var data = val.clauses[0].data.slice(2)\n                      var str = new Buffer( data, 'hex').toString('utf8')\n                      if(validator.isJSON(str)){\n                        //json格式 -> 进行判断\n                        str = JSON.parse(str)\n                        if(str.hasOwnProperty(\"title\") && str.hasOwnProperty(\"desc\") && str.hasOwnProperty(\"info\") && str.info === '佛经在线'){\n                          //符合标准，本站提交\n                          str.txid = value.meta.txID;\n                          store.commit('upmydatalist' , str)\n                        }\n                      }\n                    }\n                  })\n                }\n              })\n\n            })\n\n            console.log(this.list)\n\n          }catch (err) {\n\n            console.log(err)\n\n          }\n\n        }\n\n      },\n      golink(txid){\n        this.$router.push('/info/' + txid)\n      }\n    }\n  }\n\n</script>\n\n<style scoped>\n  li{\n    margin-bottom:7px;\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mydata\"},[_c('div',{staticClass:\"post-body\"},[_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"欢迎您：\"+_vm._s(_vm.signer))]),_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"下面为您的链上已确认数据\")]),(_vm.signer)?_c('div',[(_vm.list)?_c('div',_vm._l((_vm.list),function(items,index){return _c('li',{key:index},[_c('a',{attrs:{\"target\":\"_blank\"},on:{\"click\":function($event){return _vm.golink(items.txid)}}},[_vm._v(_vm._s(items.title))])])}),0):_c('div',[_vm._v(\"\\n        该钱包地址未上传任何数据，如已提交成功，请等待主网确认都即可显示；\\n      \")])]):_c('div',[_vm._v(\"\\n      请先授权地址访问权限\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mydata.vue?vue&type=template&id=3377b8a2&scoped=true&\"\nimport script from \"./mydata.vue?vue&type=script&lang=js&\"\nexport * from \"./mydata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mydata.vue?vue&type=style&index=0&id=3377b8a2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3377b8a2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}