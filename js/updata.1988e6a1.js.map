{"version":3,"sources":["webpack:///./src/views/updata.vue?a15e","webpack:///./src/views/updata.vue?1c73","webpack:///./src/views/updata.vue?68a8","webpack:///./src/views/updata.vue","webpack:///src/views/updata.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_updata_vue_vue_type_style_index_0_id_2ca88e25_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_updata_vue_vue_type_style_index_0_id_2ca88e25_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","align","_v","_s","signer","directives","name","rawName","value","expression","type","domProps","on","input","$event","target","composing","title","id","rows","cols","desc","content","click","updata","staticRenderFns","views_updatavue_type_script_lang_js_","updatavue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","store","_store__WEBPACK_IMPORTED_MODULE_1__","data","rtxid","sender","state","mounted","commit","computed","$store","methods","_this","alert","length","location","reload","to","toLowerCase","data1","data2","console","log","jstr","JSON","stringify","info","BF","Buffer","toString","cl1hex","message","comment","f","i","le","strs","substr","substring","push","connex","vendor","sign","request","then","result","txid"],"mappings":"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","file":"js/updata.1988e6a1.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=style&index=0&id=2ca88e25&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=style&index=0&id=2ca88e25&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"updata\"},[_c('div',{staticClass:\"fojing\"},[_c('p',{attrs:{\"align\":\"center\"}},[_vm._v(\"交易地址: \"+_vm._s(_vm.signer)+\" [数据永久保存地址]\")]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"contact\"},[_c('div',{staticClass:\"row\"},[_c('label',[_vm._v(\"文章标题 [ <=40 ]：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.title),expression:\"title\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.title=$event.target.value}}}),_c('label',[_vm._v(\"文章描述 [ <=200 ] ：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.desc),expression:\"desc\"}],attrs:{\"id\":\"message\",\"rows\":\"7\",\"cols\":\"10\"},domProps:{\"value\":(_vm.desc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.desc=$event.target.value}}}),_c('label',[_vm._v(\"文章内容 [ 支持html ]：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"id\":\"message\",\"rows\":\"24\",\"cols\":\"10\"},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}}),_c('div',{staticClass:\"submit\",on:{\"click\":function($event){return _vm.updata()}}},[_vm._v(\"发起上链交易\")])])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./updata.vue?vue&type=template&id=2ca88e25&scoped=true&\"\nimport script from \"./updata.vue?vue&type=script&lang=js&\"\nexport * from \"./updata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./updata.vue?vue&type=style&index=0&id=2ca88e25&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ca88e25\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"updata\">\n\n    <div class=\"fojing\">\n\n      <p align=\"center\">交易地址: {{signer}} [数据永久保存地址]</p>\n\n        <div class=\"container\">\n          <div class=\"contact\" >\n            <div class=\"row\">\n\n              <label>文章标题 [ <=40 ]：</label>\n              <input type=\"text\" v-model=\"title\">\n\n              <label>文章描述 [ <=200 ] ：</label>\n              <textarea id=\"message\" v-model=\"desc\" rows=\"7\" cols=\"10\"></textarea>\n\n              <label>文章内容 [ 支持html ]：</label>\n              <textarea id=\"message\" v-model=\"content\" rows=\"24\" cols=\"10\"></textarea>\n\n              <div class=\"submit\" @click=\"updata()\">发起上链交易</div>\n\n            </div>\n          </div>\n        </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\n  import store from  '@/store'\n  export default {\n      name: \"updata\",\n      store,\n      data(){\n        return{\n          title:'',\n          desc:'',\n          content:'',\n          rtxid:'',\n          sender:store.state.sender,\n        }\n      },\n      mounted(){\n        store.commit('getsigner')\n      },\n      computed:{\n        signer(){\n          return this.$store.state.signer;\n        }\n      },\n      methods: {\n        updata(){\n\n          if ( !this.title | !this.desc | !this.content){\n            alert('存在空值，请检查后重试')\n            return\n          }\n\n          if( this.title.length > 40 | this.desc.length > 200 ){\n            alert('标题长度或描述过长，请检查后重试')\n            return\n          }\n\n          if( !this.signer ){\n            alert('请先授权钱包地址获取权限')\n            location.reload()\n            return\n          }\n\n          //判断to地址\n          var to = ''\n          if (this.signer.toLowerCase() === this.sender.toLowerCase()){\n            to = this.$store.state.data1\n          }else{\n            to = this.$store.state.data2\n          }\n\n          console.log(to)\n\n          //第一条交易信息\n          var jstr = JSON.stringify\n          (\n            {\n              'title':this.title,\n              'desc':this.desc,\n              'info':'佛经在线'\n            }\n          );\n\n          console.log(jstr)\n\n          var BF = new Buffer(jstr).toString('base64');\n          var cl1hex = new Buffer(BF, 'base64').toString('hex');\n\n          var message =\n            [{\n              to: to,\n              value: '1',\n              data: '0x' + cl1hex,\n              comment: '文章上链[头部数据]'\n            }]\n\n          //文章内容分割计算\n          cl1hex = new Buffer(this.content).toString('base64');\n          cl1hex = new Buffer(cl1hex, 'base64').toString('hex');\n\n          //按长度分割 -> 每个交易25000字符\n          var f = 20000, arr = [], i = 0, le = cl1hex.length/f;\n          while(i<le){\n            var strs = cl1hex.substr(0,f);\n            cl1hex = cl1hex.substring(f);\n            message.push(\n              {\n                to: to,\n                value: '1',\n                data: '0x' + strs,\n                comment: '文章上链[文章数据]'\n              }\n            );\n            i++;\n          }\n\n         this.rtxid = ''\n          //发起交易\n          connex.vendor.sign('tx')\n            .request(message).then(result=>{\n            alert('文章上链成功，txid: '+result.txid+' .待链上确认后可以在我的数据中查看到。')\n            this.title=''\n            this.desc=''\n            this.content=''\n          })\n\n        }\n      }\n  }\n</script>\n\n<style scoped>\n  .container{padding:10px;margin:0 auto;width:90%;margin:0 auto;border-bottom: 0;}\n  h1{text-align:center;color:#bdbdbd;margin:0;line-height:1;margin-bottom:30px;text-align:center;font-size:18px;text-transform:uppercase;line-height:1;margin-top:10px;margin-bottom:20px}\n  h1 span{display:inline-block;position:relative;}\n  h1 span:before,h1 span:after{content:\"\";display:block;width:100px;height:1px;top:10px;position:absolute;background:#ccc;}\n  h1 span:before{left:-130px}h1 span:after{right:-130px}\n  .contact label{line-height:30px;}\n  .contact input[type=\"text\"],.contact input[type=\"email\"]{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font-size:18px;border:1px solid #e1e1e1;box-shadow:none;width:100%;height:36px;padding:4px 6px;font-size:14px;line-height:20px;color:#555;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;vertical-align:middle;}\n  .contact textarea{width:100%;border-radius:0;-webkit-border-radius:0;-moz-border-radius:0;-ms-border-radius:0;-moz-border-radius:0;}\n  .submit{line-height:47px;margin-top:20px;padding:4px 14px 4px 14px;background:#CCCCCC;font-weight:bold;color:#5F5F5F;border-radius:2px;border:none;text-shadow:none;box-shadow:none;cursor:pointer;}\n  .submit:hover,.submit:active,.submit.active{background-color:#2ecc71;color:#FFF;}\n  .contact input::-webkit-input-placeholder,.contact textarea::-webkit-input-placeholder{color:#CCC;font-style:italic;}\n  .contact input:-moz-placeholder,.contact textarea:-moz-placeholder{color:#CCC;font-style:italic;}\n  .contact input::-moz-placeholder,.contact textarea::-moz-placeholder{color:#CCC;font-style:italic;}\n  .contact input:-ms-input-placeholder,.contact textarea:-ms-input-placeholder{color:#CCC;font-style:italic;}\n  .contact input::-ms-input-placeholder,.contact textarea::-ms-input-placeholder{color:red;}\n  .contact-address address{font-size:14px;margin:10px 0 0;padding-left:25px;position:relative;}\n  .contact-address address i{width:15px;display:inline-block;position:absolute;left:0;top:3px;}\n  .contact-address h3{padding:10px;margin-top:0;}\n  .row{margin-bottom:10px;}\n  .row input,textarea{margin-bottom:10px;}\n  .submit{width:40%;margin:0 auto;text-align:center}\n</style>\n"],"sourceRoot":""}