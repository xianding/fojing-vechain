{"version":3,"sources":["webpack:///./src/views/mydata.vue?673d","webpack:///src/views/mydata.vue","webpack:///./src/views/mydata.vue?a0fe","webpack:///./src/views/mydata.vue?1c7e","webpack:///./src/views/mydata.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mydata_vue_vue_type_style_index_0_id_1cab0b5c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_mydata_vue_vue_type_style_index_0_id_1cab0b5c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","name","store","_store__WEBPACK_IMPORTED_MODULE_4__","data","error","sender","state","recipient","data2","page","pageSize","list","txid","computed","signer","this","$store","mounted","commit","read","watch","old","val","reload","methods","golink","$router","push","_this","offset","filter","connex","thor","criteria","apply","then","rest","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","indexOf","meta","txID","transaction","get","clauses","slice","str","Buffer","toString","validator__WEBPACK_IMPORTED_MODULE_5___default","a","isJSON","JSON","parse","hasOwnProperty","info","err","return","length","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","text-align","_v","_s","_l","items","index","key","attrs","target","on","click","$event","title","staticRenderFns","views_mydatavue_type_script_lang_js_","mydatavue_type_script_lang_js_","component","Object","componentNormalizer"],"mappings":"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","file":"js/mydata.a85b64cd.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=style&index=0&id=1cab0b5c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=style&index=0&id=1cab0b5c&scoped=true&lang=css&\"","<template>\n  <div class=\"mydata\">\n    <div class=\"fojing\">\n      <p style=\"text-align: center\">欢迎您：{{signer}}</p>\n      <p style=\"text-align: center\">下面为您的链上已确认数据；如无数据，请确定是否上传过数据或等待主网确认( < 10秒 )</p>\n      <div v-if=\"signer\">\n          <div v-if=\"error\">\n            {{error}}\n          </div>\n          <div v-else>\n            <li v-for=\"(items,index) in list\" :key=\"index\" >\n              <a @click=\"golink(txid[index])\" target=\"_blank\">{{ items.title }}</a>\n            </li>\n          </div>\n      </div>\n      <div v-else>\n        请先授权地址访问权限\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import store from  '@/store'\n  import validator from 'validator'\n  export default {\n    name: \"mydata\",\n    store,\n    data() {\n      return {\n        error:null,\n        sender: store.state.sender,\n        recipient:store.state.data2,\n        page:0,\n        pageSize:256,\n        list:[],\n        txid:[]\n      }\n    },\n    computed: {\n      signer() {\n        return this.$store.state.signer;\n      }\n    },\n    mounted() {\n\n      this.error=null\n      this.page=0\n      this.list=[]\n      this.txid=[]\n\n      store.commit('getsigner')\n      this.read()\n    },\n    watch:{\n      signer:function(old){\n\n        this.error=null\n        this.page=0\n        this.list=[]\n        this.txid=[]\n\n        this.read()\n\n      },\n      page:function(val){\n        this.reload()\n      }\n    },\n    methods: {\n      read() {\n\n        if (this.signer) {\n\n          this.reload()\n\n        }\n\n      },\n      golink(txid){\n        this.$router.push('/info/' + txid)\n      },\n      reload(){\n\n        var offset = this.page * this.pageSize\n        try{\n\n          const filter = connex.thor.filter('transfer')\n\n          filter.criteria([{\n            sender: this.signer,\n            recipient:this.recipient\n          }])\n\n          filter.apply(offset,this.pageSize).then(\n            rest => {\n\n              for( let val of rest){\n\n                if( this.txid.indexOf(val.meta.txID) === -1 ){\n\n                  this.txid.push(val.meta.txID)\n\n                  try{\n\n                    const transaction=connex.thor.transaction(val.meta.txID)\n                    transaction.get().then(data=>{\n                      if( data.clauses ){\n                        data = data.clauses[0].data.slice(2)\n                        var str = new Buffer( data, 'hex').toString('utf8')\n                        if(validator.isJSON(str)){\n                          str = JSON.parse(str)\n                          if(str.hasOwnProperty(\"title\") && str.hasOwnProperty(\"desc\") && str.hasOwnProperty(\"info\") && str.info === '佛经在线'){\n\n                            this.list.push(str)\n\n                          }\n                        }\n                      }\n                    })\n\n                  }catch (err) {\n                    this.error = err\n                  }\n\n                }\n\n              }\n\n              if(rest.length === this.pageSize){\n\n                this.page++\n\n              }\n\n            }\n          )\n        }catch (err) {\n          this.error = \"从主网拉取交易列表失败，请检查网络是否正常\"\n        }\n\n      }\n    }\n  }\n\n</script>\n\n<style scoped>\n  li{\n    margin-bottom:7px;\n  }\n</style>\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mydata\"},[_c('div',{staticClass:\"fojing\"},[_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"欢迎您：\"+_vm._s(_vm.signer))]),_c('p',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"下面为您的链上已确认数据；如无数据，请确定是否上传过数据或等待主网确认( < 10秒 )\")]),(_vm.signer)?_c('div',[(_vm.error)?_c('div',[_vm._v(\"\\n          \"+_vm._s(_vm.error)+\"\\n        \")]):_c('div',_vm._l((_vm.list),function(items,index){return _c('li',{key:index},[_c('a',{attrs:{\"target\":\"_blank\"},on:{\"click\":function($event){return _vm.golink(_vm.txid[index])}}},[_vm._v(_vm._s(items.title))])])}),0)]):_c('div',[_vm._v(\"\\n      请先授权地址访问权限\\n    \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mydata.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mydata.vue?vue&type=template&id=1cab0b5c&scoped=true&\"\nimport script from \"./mydata.vue?vue&type=script&lang=js&\"\nexport * from \"./mydata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mydata.vue?vue&type=style&index=0&id=1cab0b5c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1cab0b5c\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}